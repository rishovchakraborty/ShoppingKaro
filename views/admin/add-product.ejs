<%- include('../includes/header.ejs') %>
<link rel="stylesheet" href="/css/add-product.css" />
<style>
  .drop-area {
    border: 2px dashed #7fffd4;
    border-radius: 8px;
    padding: 2rem;
    text-align: center;
    background: #f7f8fa;
    color: #888;
    margin-bottom: 1.2rem;
    transition: border-color 0.2s;
  }
  .drop-area.dragover {
    border-color: #1e9c5a;
    color: #1e9c5a;
    background: #eafff2;
  }
  .drop-area img {
    max-width: 180px;
    margin-top: 1rem;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.07);
  }
</style>
</head>

  <body>
    <%- include('../includes/navbar.ejs') %>
    <main>
      <form action="/admin/add-product" method="POST" enctype="multipart/form-data">
        <div class="form-section">
          <div class="form-hero">
            <input type="text" name="title" placeholder="Product Title" />
          </div>
          <div class="form-hero">
            <div class="drop-area" id="drop-area">
              <span id="drop-text">Drag & Drop Product Image Here or Click to Select</span>
              <input type="file" name="image" id="imageInput" accept="image/*" style="display:none;" />
              <img id="preview" style="display:none;" />
            </div>
          </div>
          <div class="form-hero">
            <input type="number" name="price" placeholder="Product Price" />
          </div>
          <div class="form-hero">
            <textarea name="description" cols="30" rows="10" placeholder="Product Description"></textarea>
          </div>
          <div class="form-button">
            <button type="submit">Add Product</button>
          </div>
        </div>
      </form>
      <script>
        const dropArea = document.getElementById('drop-area');
        const imageInput = document.getElementById('imageInput');
        const preview = document.getElementById('preview');
        const dropText = document.getElementById('drop-text');

        dropArea.addEventListener('click', () => imageInput.click());
        dropArea.addEventListener('dragover', (e) => {
          e.preventDefault();
          dropArea.classList.add('dragover');
        });
        dropArea.addEventListener('dragleave', () => dropArea.classList.remove('dragover'));
        dropArea.addEventListener('drop', (e) => {
          e.preventDefault();
          dropArea.classList.remove('dragover');
          const file = e.dataTransfer.files[0];
          if (file) {
            imageInput.files = e.dataTransfer.files;
            showPreview(file);
          }
        });
        imageInput.addEventListener('change', (e) => {
          if (e.target.files[0]) showPreview(e.target.files[0]);
        });
        function showPreview(file) {
          const reader = new FileReader();
          reader.onload = (e) => {
            preview.src = e.target.result;
            preview.style.display = 'block';
            dropText.style.display = 'none';
          };
          reader.readAsDataURL(file);
        }
      </script>
    </main>
    <%- include('../includes/footer.ejs') %>
